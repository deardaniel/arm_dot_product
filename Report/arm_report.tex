%%!TEX encoding = UTF-8 Unicode 
\documentclass[oneside,a4paper]{report}

% Use utf-8 encoding for foreign characters
\usepackage[utf8]{inputenc}

% Setup for fullpage use
\usepackage{fullpage}
\usepackage[usenames,dvipsnames]{color}
\usepackage[colorlinks=true,citecolor=OrangeRed,urlcolor=NavyBlue,linkcolor=ForestGreen]{hyperref}
%\usepackage{subfigure}
% \usepackage{boxedminipage}
\usepackage{listings}
\usepackage{booktabs}

\lstdefinelanguage[ARM]{Assembler}%
  {morekeywords=[1]{.text,.globl,.align},%
  morekeywords=[2]{add,beq,bge,blt,bne,cmp,ldr,mov,mul,pop,push,%
    subs,vadd,vld1,vldm,vmov,vmul,vpadd,vpop,vpush},%
   morekeywords=[3]{f32,s32,i32},%
   keywordsprefix=.,%
   sensitive,%
   morecomment=[l]//,% nonstandard
   moredelim=*[directive]\#,%
   moredirectives={define,elif,else,endif,error,if,ifdef,ifndef,line,%
      include,pragma,undef,warning}%
  }[keywords,comments,directives]

\lstset{
  numbers=left,
  numberstyle=\tiny,
  numbersep=10pt,
  basicstyle=\small\ttfamily,
  keywordstyle=[1]\color{RedOrange},
  keywordstyle=[2]\color{RoyalBlue},
  keywordstyle=[3]\color{Mulberry},
  identifierstyle=,
  commentstyle=\color{OliveGreen},
  stringstyle=\ttfamily,
  directivestyle=\color{OliveGreen},
  showstringspaces=false
}

% This is now the recommended way for checking for PDFLaTeX:
\usepackage{ifpdf}

%\newif\ifpdf
%\ifx\pdfoutput\undefined
%\pdffalse % we are not running PDFLaTeX
%\else
%\pdfoutput=1 % we are running PDFLaTeX
%\pdftrue
%\fi

\ifpdf
\usepackage[pdftex]{graphicx}
\else
\usepackage{graphicx}
\fi

\title{ \textbf{ARM Cortex-A8} \\ \large{4810-1164 Modern Computer Architectures and System Software}}
\author{ \textbf{Daniel Heffernan} \\ Creative Informatics (M1) -- 48-116625 }

\begin{document}

\ifpdf
\DeclareGraphicsExtensions{.pdf, .jpg, .tif}
\else
\DeclareGraphicsExtensions{.eps, .jpg}
\fi

\maketitle

\chapter{Introduction}

The ARM Cortex-A8 is the CPU in Apple's A4 SoC (System on Chip), which powers Apple's iPad and iPhone 4.

ARMv7-A is one of three available profiles of ARMv7 \cite[p. A1-4]{ARMRef}. ARMv7-R is a real-time variant which uses a \emph{Protected Memory System Architecture} (PMSA) instead of ARMv7-A's \emph{Virtual Memory System Architecture} (VMSA). ARMv7-M is a microcontroller variant.

First implementation of the ARMv7 instruction-set architecture, including the Advanced SIMD media instructions (NEONTM)

\begin{figure}[htbp]
	\centering
	\includegraphics{./fig/CortexA8.pdf}
	\caption{Overview of the Cortex-A8 architecture from \cite[p. 1-4]{A8Ref}.}
	\label{fig:cortexa8}
\end{figure}

\chapter{Main Features}

ARM is a RISC-based architecture, and the Cortex series is a recent line of ARM processors. The Cortex follows the ARM11 series, and the Cortex-A8 is an ARMv7-A architecture processor that supports ARM, Thumb-2/Thumb, NEON and VFPv3 instruction sets.

\begin{figure}[htbp]
	\centering
	\includegraphics{./fig/Pipeline.pdf}
	\caption{Cortex-A8 full pipeline from \cite[p. 3]{Williamson}.}
	\label{fig:pipeline}
\end{figure}

In-order, dual-issue, superscalar microprocessor core
Integer pipeline is 13-stage
NEON is 10-stage
Load-store

\chapter{Registers}

ARM Cortex-A8 contains 16 user registers are 32 bits long. However, load and store operations are not limited to word-sized data, and these operations can be performed with bytes, half-words, words and double-words. There are also load and store operations that support two or more words of data, so it is possible to fill all registers with a single load.

The processor has 40 registers \cite[p. 2-18]{A8Ref}. This includes 33 general-purpose registers and 7 status registers (SPSRs). In user-mode 16 data registers and 2 status registers are accessible, and these are described in table~\ref{tbl:registers}. Though 16 registers are available, many of these are reserved. r13, r14 and r15 are used for the stack pointer, link register and program counter, respectively. On iOS r7 is also reserved for use as the frame pointer.

The NEON unit also has its own registers for use in VFP and NEON operations. There are 8 128-bit (quad-word) registers available. These can also be addressed as 16 double-word registers or 32 single-word registers. This is illustrated in table~\ref{tbl:registers}.

A2

Register Format
Access Methods

Virtual memory and cache?


\begin{table}[p]
	\centering
	\include{tbl_registers}
	\caption{User-mode registers. Compiled from \cite[p. 15]{AAPCS} and \cite[p. 14--15]{iOSABI}.}
	\label{tbl:registers}
\end{table}


\begin{figure}[htb]
	\centering
	\includegraphics{./fig/CPSR.pdf}
	\caption{Program status register from \cite[p. 2-21]{A8Ref}.}
	\label{fig:cpsr}
\end{figure}


\chapter{Data Types}

There are four data types available for arithmetic operations in ARM mode. These are listed in table~\ref{tbl:datatypes}.

\begin{table}[htb]
	\centering
	\begin{tabular}{lr}
		\toprule
		Type			&		Size		\\
		\midrule
		doubleword		&		64-bit		\\
		word			& 		32-bit		\\
		halfword 		& 		16-bit		\\
		byte 			& 		8-bit		\\
		\bottomrule
	\end{tabular}
	\caption{ARM data types.}
	\label{tbl:datatypes}
\end{table}

unsigned is two's complement

mixed-endian (E-bit in Program Status Register) and unaligned support but should be aligned for best performance
2.14


A2
A3
2-14
\chapter{Instruction Format}
instruction order
ARM
Thumb
ThumbEE

conditional instructions
APSR

A4
A5.1
Condition execution A8-8
\chapter{Unusual Instructions}
Perhaps in A4.4.6, A4.4.7, A4.8
bit fields?
\chapter{Memory Management}
A3
B2

6-2
\chapter{ARM Assembly Programming Example}
iOS ABI Function Call Guide \cite{iOSABI}

\bibliographystyle{plain}
\bibliography{ARM_Report}

\clearpage

\appendix
\chapter{ARM Assembly Programming Example -- Inner Product of Two Vectors}
  
\lstinputlisting[language={[ARM]Assembler}]{../ARM/dot_product.s}

\end{document}
